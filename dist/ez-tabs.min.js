angular.module("ez.tabs",[]).constant("EzTabsConfig",{preSelectPromise:null,lazy:!0}).directive("tabset",["$templateCache","$compile","EzTabsConfig",function(a,b,c){return{restrict:"E",scope:{config:"=?",tabIndex:"=?"},compile:function(d,e){var f,g,h,i,j,k=d.find("tab").remove(),l=[],m=angular.element('<div><ul class="nav nav-tabs"></ul><div class="tab-content"></div></div>');for(var n in e.$attr)"config"!==n&&"tabIndex"!==n&&m.attr(n,e[n]);return m.addClass("ez-tabs"),h=m.find("ul"),i=m.find(".tab-content"),k.each(function(a){g=angular.element('<li data-index="'+a+'"><a>'+k[a].children[0].innerHTML+"</a></li>"),f=angular.element('<div data-index="'+a+'" class="tab-pane"><div class="tab-pane-content"></div></div>'),j=k[a].attributes;for(var b=0;b<j.length;b++)g.find("a").attr(j[b].nodeName,j[b].value),f.find(".tab-pane-content").attr(j[b].nodeName,j[b].value);l.push({src:k[a].children[1].getAttribute("src"),rawHtml:k[a].children[1].innerHTML}),h.append(g),i.append(f)}),function(d,e,f){var g,i,j;d.tabs=l,d.options=angular.extend({},c,d.config),m.find(".nav.nav-tabs").on("click","a",function(){d.select($(this).parent().data("index"))});var k=function(c){g=d.tabs[c],i=g.src?a.get(g.src):g.rawHtml,m.find('.tab-pane[data-index="'+c+'"]').append(i),b(m.find('.tab-pane[data-index="'+c+'"]'))(d.$parent),g.compiled=!0};if(!d.options.lazy||"false"===f.lazy)for(var n=0;n<l.length;n++)k(n);j=function(a){g=d.tabs[a],g.compiled||k(a),m.find(".active").removeClass("active"),m.find('.tab-pane[data-index="'+a+'"]').addClass("active"),m.find('li[data-index="'+a+'"]').addClass("active"),d.tabIndex=a},d.select=function(a){d.options.preSelectPromise?d.options.preSelectPromise(d.tabs[a],m,a).then(function(){j(a)}):j(a)},e.replaceWith(m),b(h)(d.$parent),j(0)}}}}]);